{"version":3,"sources":["webpack:///D:/Workspance/HBuilderProjects/uni-app-mango-diancan/main.js","webpack:///D:/Workspance/HBuilderProjects/uni-app-mango-diancan/pages/pay-methods/pay-methods.vue?7ab4","webpack:///D:/Workspance/HBuilderProjects/uni-app-mango-diancan/pages/pay-methods/pay-methods.vue?a245","webpack:///D:/Workspance/HBuilderProjects/uni-app-mango-diancan/pages/pay-methods/pay-methods.vue?29af","webpack:///D:/Workspance/HBuilderProjects/uni-app-mango-diancan/pages/pay-methods/pay-methods.vue?1756","webpack:///D:/Workspance/HBuilderProjects/uni-app-mango-diancan/pages/pay-methods/pay-methods.vue"],"names":["createPage","Page","components","price","uniListItem","data","loading","detail","id","payMethod","options","title","note","icon","value","onLoad","e","uni","showToast","JSON","parse","methods","submit","appPay","weixinMpPay","login","success","$H","get","code","token","native","then","res","console","log","paymentData","requestPayment","timeStamp","nonceStr","package","signType","paySign","redirectTo","url","stringify","fail","showModal","content","errMsg","showCancel","complete","catch","err","change"],"mappings":"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","file":"pages/pay-methods/pay-methods.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/pay-methods/pay-methods.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./pay-methods.vue?vue&type=template&id=5e23288d&\"\nvar renderjs\nimport script from \"./pay-methods.vue?vue&type=script&lang=js&\"\nexport * from \"./pay-methods.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5e23288d')) {\n      api.createRecord('5e23288d', component.options)\n    } else {\n      api.reload('5e23288d', component.options)\n    }\n    module.hot.accept(\"./pay-methods.vue?vue&type=template&id=5e23288d&\", function () {\n      api.rerender('5e23288d', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Workspance/HBuilderProjects/uni-app-mango-diancan/pages/pay-methods/pay-methods.vue\"\nexport default component.exports","export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay-methods.vue?vue&type=template&id=5e23288d&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay-methods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./pay-methods.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport price from \"@/components/common/price.vue\"\nimport uniListItem from \"@/components/uni-ui/uni-list-item/uni-list-item.vue\"\nexport default {\n\tcomponents: {\n\t\tprice,\n\t\tuniListItem\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading:false,\n\t\t\tdetail:{\n\t\t\t\tid:0,\n\t\t\t\tprice:0\n\t\t\t},\n\t\t\tpayMethod:\"alipay\",\n\t\t\toptions:[{\n\t\t\t\ttitle:\"支付宝支付\",\n\t\t\t\tnote:\"推荐使用支付宝支付\",\n\t\t\t\ticon:\"icon-zhifubao text-primary\",\n\t\t\t\tvalue:\"alipay\"\n\t\t\t\t},{\n\t\t\t\ttitle:\"微信支付\",\n\t\t\t\tnote:\"\",\n\t\t\t\ticon:\"icon-weixinzhifu text-success\",\n\t\t\t\tvalue:\"wxpay\"\n\t\t\t}]\n\t\t}\n\t},\n\tonLoad(e) {\n\t\tif(!e.detail){\n\t\t\treturn uni.showToast({\n\t\t\t\ttitle: '支付失败',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t}\n\t\tthis.detail = JSON.parse(e.detail)\n\t\t\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t\t\n\n\t\tthis.options = [{\n\t\t\ttitle:\"微信支付\",\n\t\t\tnote:\"推荐使用微信支付\",\n\t\t\ticon:\"icon-weixinzhifu text-success\",\n\t\t\tvalue:\"wxpay\"\n\t\t}]\n\t\tthis.payMethod = 'wxpay'\n\n\t},\n\tmethods: {\n\t\t// 支付\n\t\tsubmit(){\n\t\t\t// 防止重复支付\n\t\t\tif(this.loading) return;\n\t\t\tthis.loading = true\n\t\t\t\n\t\t\tthis.appPay()\n\n\n\n\n\t\t\tthis.weixinMpPay()\n\n\t\t},\n\t\t// 微信小程序支付\n\t\tweixinMpPay(){\n\t\t\t// 请求接口\n\t\t\tuni.login({\n\t\t\t\tsuccess: (e) => {\n\t\t\t\t\tthis.$H.get('/payment/'+this.detail.id+'/wxmppay/'+e.code,{},{\n\t\t\t\t\t\ttoken:true,\n\t\t\t\t\t\tnative:true\n\t\t\t\t\t})\n\t\t\t\t\t.then(res=>{\n\t\t\t\t\t\tconsole.log(res.data);\n\t\t\t\t\t\t// 发起小程序支付\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tappId:\"wxb1f305de99c0fe32\",\n\t\t\t\t\t\t\tnonceStr:\"ZM7mqDUe5wYVpz1h\",\n\t\t\t\t\t\t\tpackage:\"prepay_id=wx31215725257777f851bd31661280875100\",\n\t\t\t\t\t\t\tpaySign:\"2114A262F841E9A8080972A0D5C6E7F7\",\n\t\t\t\t\t\t\tsignType:\"MD5\",\n\t\t\t\t\t\t\ttimeStamp:\"1577800644\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t   let paymentData = res.data;\n\t\t\t\t\t   uni.requestPayment({\n\t\t\t\t\t       timeStamp: paymentData.timeStamp,\n\t\t\t\t\t       nonceStr: paymentData.nonceStr,\n\t\t\t\t\t       package: paymentData.package,\n\t\t\t\t\t       signType: 'MD5',\n\t\t\t\t\t       paySign: paymentData.paySign,\n\t\t\t\t\t       success: (res) => {\n\t\t\t\t\t           // 重定向/防止重复支付\n\t\t\t\t\t           uni.redirectTo({\n\t\t\t\t\t           \turl: '../pay-result/pay-result'\n\t\t\t\t\t           });\n\t\t\t\t\t           console.log('success:' + JSON.stringify(res));\n\t\t\t\t\t       },\n\t\t\t\t\t       fail: (res) => {\n\t\t\t\t\t           uni.showModal({\n\t\t\t\t\t               content: \"支付失败,原因为: \" + res\n\t\t\t\t\t                   .errMsg,\n\t\t\t\t\t               showCancel: false\n\t\t\t\t\t           })\n\t\t\t\t\t       },\n\t\t\t\t\t       complete: () => {\n\t\t\t\t\t           this.loading = false;\n\t\t\t\t\t       }\n\t\t\t\t\t   })\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err=>{\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '支付失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tfail: (e) => {\n\t\t\t\t\tconsole.log(\"fail\", e);\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t    content: \"支付失败,原因为: \" + e.errMsg,\n\t\t\t\t\t    showCancel: false\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// app支付\n\t\tappPay(){\n\t\t\tthis.$H.get('/order/payment/'+this.detail.id+'/'+this.payMethod,{},{\n\t\t\t\ttoken:true,\n\t\t\t\tnative:true\n\t\t\t}).then(res=>{\n\t\t\t\tconsole.log(res);\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tuni.redirectTo({\n\t\t\t\t\turl: '../pay-result/pay-result'\n\t\t\t\t});\n\t\t\t\t/*\n\t\t\t\tuni.requestPayment({\n\t\t\t\t    provider: this.payMethod,\n\t\t\t\t    orderInfo: res.data, //微信、支付宝订单数据\n\t\t\t\t    success: (res)=> {\n\t\t\t\t\t\t// 重定向/防止重复支付\n\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\turl: '../pay-result/pay-result'\n\t\t\t\t\t\t});\n\t\t\t\t        console.log('success:' + JSON.stringify(res));\n\t\t\t\t    },\n\t\t\t\t    fail: (err)=> {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\tcontent: '支付失败',\n\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t});\n\t\t\t\t        console.log('fail:' + JSON.stringify(err));\n\t\t\t\t    },\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tthis.loading = false\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t*/\n\t\t\t}).catch(err=>{\n\t\t\t\tthis.loading = false\n\t\t\t\tconsole.log(err);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '支付失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\t// 切换支付方式\n\t\tchange(e){\n\t\t\tthis.payMethod = e.detail.value\n\t\t}\n\t}\n}\n"],"sourceRoot":""}