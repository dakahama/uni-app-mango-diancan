(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/coupon/coupon"],{"1e4b":function(t,n,e){"use strict";var o,u=function(){var t=this,n=t.$createElement;t._self._c},i=[];e.d(n,"b",function(){return u}),e.d(n,"c",function(){return i}),e.d(n,"a",function(){return o})},8624:function(t,n,e){"use strict";e.r(n);var o=e("d383"),u=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,function(){return o[t]})}(i);n["default"]=u.a},"87e5":function(t,n,e){"use strict";(function(t){e("1039"),e("921b");o(e("66fd"));var n=o(e("97d2"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"97d2":function(t,n,e){"use strict";e.r(n);var o=e("1e4b"),u=e("8624");for(var i in u)"default"!==i&&function(t){e.d(n,t,function(){return u[t]})}(i);var r,a=e("f0c5"),c=Object(a["a"])(u["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);n["default"]=c.exports},d383:function(t,n,e){"use strict";(function(t){function o(t){return r(t)||i(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function r(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){return e.e("components/order-coupon/coupon").then(e.bind(null,"bf59"))},c=function(){return e.e("components/common/no-thing").then(e.bind(null,"6748"))},l={components:{coupon:a,noThing:c},data:function(){return{page:1,list:[],loadtext:"上拉加载更多"}},onLoad:function(){this.getData()},onPullDownRefresh:function(){this.page=1,this.getData(!0).then(function(n){t.stopPullDownRefresh()}).catch(function(n){t.stopPullDownRefresh()})},onReachBottom:function(){"上拉加载更多"===this.loadtext&&(this.loadtext="加载中...",this.page++,this.getData())},methods:{getData:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(function(e,u){t.$H.get("/coupon/"+t.page,{},{token:!0}).then(function(u){var i=u.map(function(t){var n=(new Date).getTime(),e=t.end_time>n/1e3&&t.status;return{id:t.id,title:t.name,start_time:t.start_time,end_time:t.end_time,price:t.value,desc:t.desc,status:e,disabled:t.coupon_user.length>0}});t.list=n?o(i):[].concat(o(t.list),o(i)),t.loadtext=10===u.length?"上拉加载更多":"没有更多了",e(e)}).catch(function(n){t.page--,u(n)})})},getCoupon:function(n){this.$H.post("/getcoupon/"+n.id,{},{token:!0}).then(function(e){n.disabled=!0,t.showToast({title:"领取成功",icon:"none"})})}}};n.default=l}).call(this,e("543d")["default"])}},[["87e5","common/runtime","common/vendor"]]]);